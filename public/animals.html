<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <!-- Compiled and minified CSS -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
        <link href="https://fonts.googleapis.com/css?family=Barlow|Montserrat|Viga&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <link rel="stylesheet" href="./style.css">
  <title>Animals Page</title>
</head>
<body>
  <!-- main nav -->
  <nav>
    <div class="nav-wrapper">
      <div class="container">
        <a href="#" class="sidenav-trigger" data-target="slide-out"><i class="material-icons">menu</i></a>
        <a href="index.html" class="brand-logo" id="logo">GUARDIAN</a>
        <ul class="right hide-on-med-and-down">
          <li class="navMenu"><a href="adoption.html">Adoption</a></li>
          <li class="navMenu"><a href="intake.html">Intake</a></li>
          <li class="navMenu"><a href="animals.html">Animals</a></li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- sidenav -->
  <ul class="sidenav" id="slide-out">
    <li>
      <a href="adoption.html">
        <p>Adoption</p>
      </a>
    </li>
    <li>
      <a href="intake.html">
        <p>Intake</p>
      </a>
    </li>
    <li>
      <a href="animals.html">
        <p>Animals</p>
      </a>
    </li>
  </ul>

<br>
<br>

<!-- Animal cards -->
  
<!-- End of 1st row animal cards -->
<div id="animalDisplay"></div>






  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script>

const getAnimal =_=> {
        axios.get('/animal')
          .then(({ data }) => {
            console.log(data)

            data.forEach(animal => {

              console.log(animal.name)
              let animalElem = document.createElement('div')
              
              animalElem.innerHTML = `
              <div class="col s12 m6 l3">
              <img src="${animal.image}" id='image1'>
              <p> Name: ${animal.name} </p>
              <p> Age: ${animal.age} </p>
              <p> Breed: ${animal.breed} </p>
              <a class="btn-floating halfway-fab waves-effect waves-light teal lighten-2"><i class="material-icons">+</i></a>
              <div class="row">
        <div class="col s6">
          <p>Fed?</p>
          <!-- Switch -->
          <div class="switch">
            <label>
              No
              <input type="checkbox">
              <span class="lever" id="fed" data-animals ="${animal.id}"></span>
              Yes
            </label>
          </div>
        </div>

        <div class="col s6">
          <p>Walked?</p>
          <!-- Switch -->
          <div class="switch">
            <label>
              No
              <input type="checkbox">
              <span class="lever" id="walked" data-animals = "${animal.id}"></span>
              Yes
            </label>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col s6">
          <p>Cleaned?</p>
          <!-- Switch -->
          <div class="switch">
            <label>
              No
              <input type="checkbox">
              <span class="lever" id="cleaned" data-animals = "${animal.id}"></span>
              Yes
            </label>
          </div>
        </div>
        <div class="col s6">
          <p>Played?</p>
          <!-- Switch -->
          <div class="switch">
            <label>
              No
              <input type="checkbox">
              <span class="lever" id="played" data-animals = ${animal.id}></span>
              Yes
            </label>
          </div>
        </div>
      </div>
              `
              animalElem.className = 'card1'
              document.getElementById('animalDisplay').append(animalElem)
            })
          })
          .catch(e => console.log(e))
      }

          //update animal
          const updateAnimal = id => {
        axios.put(`/animal/:${id}`)
          .then(() => {
            console.log('animal updated')
          })
          .catch(e => console.log(e))
      }

      // remove animal

      const removeAnimal = id => {
        axios.delete(`/animal/:${id}`)
          .then(() => {
            console.log('animal deleted')
          })
          .catch(e => console.log(e))
      }

      document.addEventListener('click', e => {
        if(e.target.parentNode.className.includes('lever')) {
          // updateAnimal(e.target.parentNode.dataset.animals)
        }
      })
    
    getAnimal()

</script>

      <!-- Compiled and minified JavaScript -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <!-- <script src="/app.js"></script> -->
        <script>const slideMenu = document.querySelectorAll('.sidenav');
          M.Sidenav.init(slideMenu, {});
        </script>
</body>
</html>